# Supplier Lookup Challenge

## The Challenge

You are given two files `invoice.txt` and `suppliernames.txt`. 

The first file `invoice.txt` contains the words of an invoice (see invoice.pdf)
generated by the OCR engine. Each line has the text of the word
and information about the location of the word in the document. For
example, the line:

```
{'pos_id': 1, 'cspan_id': 1, 'rspan_id': 0, 'right': 87.06, 'word':
'INVOICE', 'line_id': 0, 'top': 4.0, 'height': 1.52, 'width': 10.51, 'left':
76.55, 'page_id': 1, 'word_id': 1}
```

contains the word 'INVOICE', the page it came from (page_id = 1),
the line number (line_id = 6), the position of the word in that line
(pos_id = 0).
You might not need the other information. 

The second file, `suppliernames.txt`, contains a list of supplier names.
The requirement is to find the supplier name of that invoice by
matching the given list of supplier names to the invoice.
Although only a limited number of supplier names are given, make
your solution scalable to hundreds of thousands of supplier names.

## To Run

Scripts below are run in the project folder.

**NOTE** This was developed on Mac. Scripts haven't been tested on other platforms

### Requirements

* Node.JS 6 or greater

### Setup

Install required packages

```bash
npm install
```

### Build and Run

As this is written in Typescript is requires the sourcecode to be build.
This is done automatically in the `prestart` script. So to get it going, just:

```bash
npm start
```

Giving output:

```
Suppliers loaded: 92, 76ms
# Simple method
Words loaded: 143, 91ms
Phrases computed: 69, 3ms
Found at line: 4, left: 4.04
Supplier name: Demo Company, 1ms
# Verified supplier method
Words loaded: 143, 80ms
Phrases computed: 69, 0ms
Found at line: 4, left: 4.04
Supplier name: Demo Company, 2ms
. done
```

## Notes

Parsers for the non-standard file formats are included. They
are fairly basic and I'm sure there is room for improvement.

When parsing the input OCR file, the first pass is simply parsing
the JSON-like file format into objects representing each word. Then 
there is a second pass that groups consecutive words into "phrases".

There are two methods of getting out the supplier name

1. simply looking at a line number and getting the nearest phrase to a position
2. starting at a position (top and left coordinates) and working from 
the nearest to farthest field check them against a validator function.
The first valid phrase is returned.

As it only has to deal with hundreds of thousands of suppliers,
and that can easily be loaded into memory, I have done a fairly 
crude map lookup to validating the supplier name.
